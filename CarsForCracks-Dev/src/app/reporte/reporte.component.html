<!-- 
================================================================================================================= 

APARTADO ADMIN's
-----------------------------
para verla inicia sesion con
correo: axeldmh@gmail.com
pass:   axel27 
-----------------------------
================================================================================================================= 
-->

<div class="container mt-3">
    @if (citasService.obtenerCookie() == 'axeldmh@gmail.com' || citasService.obtenerCookie() == 'al261430@edu.uaa.mx') {
        <div class="text-center mb-3 btn-group">
            <button class="btn btn-primary" (click)="mostrarAllCitas()">Mostrar todas</button>
            <button class="btn btn-primary" (click)="mostrarActualesCitas()">Mostrar Actuales</button>
            <button class="btn btn-primary" (click)="mostrarPasadasCitas()">Mostrar Pasadas</button>
            <button class="btn btn-primary" (click)="mostrarMarcaCitas()">Mostrar Marca</button>
        </div>

        @if(mostrarAll){
            <div id="cartas">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
                    <h1 class="text-center w-100">Reportes</h1>
                    @if(citasService.obtenerCookie() != null){
                        @for (c of citasAdmin; track c; let i = $index) {
                            <div class="col">
                                <div class="masonry-item">
                                    <div class="card shadow-sm border-0 rounded">
                                        <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                        <div class="card-body">
                                            <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                            <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                            <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                            <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                            <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>
                                            <button class="btn btn-danger mt-3" (click)="eliminarCita(c.usuario.nombre, c.auto.nombre, c.fechaFin)">Eliminar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
            <div class="grafica"></div>
        }

        @if (mostrarActuales) {
            <div id="cartas">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
                    <h1 class="text-center w-100">Reservas Actuales</h1>
                    @if(citasService.obtenerCookie() != null){
                        @for (c of citasFuturas; track c; let i = $index) {
                            <div class="col">
                                <div class="masonry-item">
                                    <div class="card shadow-sm border-0 rounded">
                                        <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                        <div class="card-body">
                                            <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                            <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                            <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                            <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                            <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        }

        @if(mostrarPasadas){
            <div id="cartas">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
                    <h1 class="text-center w-100">Reservas Pasadas</h1>
                    @if(citasService.obtenerCookie() != null){
                        @for (c of citasPasadas; track c; let i = $index) {
                            <div class="col">
                                <div class="masonry-item">
                                    <div class="card shadow-sm border-0 rounded">
                                        <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                        <div class="card-body">
                                            <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                            <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                            <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                            <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                            <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        }

        @if(mostrarMarca){
            <div id="cartas">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
                    <h1 class="text-center w-100">Reservas BMW</h1>
                    @if(citasService.obtenerCookie() != null){
                        @for (c of citasMarca; track c; let i = $index) {
                            <div class="col">
                                <div class="masonry-item">
                                    <div class="card shadow-sm border-0 rounded">
                                        <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                        <div class="card-body">
                                            <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                            <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                            <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                            <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                            <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                            <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        }

        
    }
    @else {
<!-- 
================================================================================================================= 

FIN APARTADO ADMIN's

================================================================================================================= 
-->

<div id="cartas">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
        <h1 class="section-title w-100" style="margin-top: 90px;">Reportes Actuales</h1>
        @if(citasService.obtenerCookie() != null){
            @for (c of clientesActivos; track c; let i = $index) {
                @if (citasService.obtenerCookie() === c.usuario.correo) {
                    <div class="col">
                        <div class="masonry-item">
                            <div class="card shadow-sm border-0 rounded">
                                <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                <div class="card-body">
                                    <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                    <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                    <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                    <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                    <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                    <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                    <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>                            
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        }
    </div>
</div>
<div id="cartas" style="margin-top: 100px; margin-bottom: 100px;">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
        <h1 class="section-title w-100">Reportes Pasados</h1>
        @if(citasService.obtenerCookie() != null){
            @for (c of clientesInactivos; track c; let i = $index) {
                @if (citasService.obtenerCookie() === c.usuario.correo) {
                    <div class="col">
                        <div class="masonry-item">
                            <div class="card shadow-sm border-0 rounded">
                                <img src="{{c.auto.img}}" class="card-img-top" alt="...">
                                <div class="card-body">
                                    <h5 class="card-title">Rentador: {{c.usuario.nombre}}</h5>
                                    <p class="card-text">Tel: {{c.usuario.tel}}</p>
                                    <p class="card-text">Correo: {{c.usuario.correo}}</p>
                                    <p class="card-text">Fecha de préstamo: {{c.fechaInicio | date:'dd/MM/yyyy HH:mm'}}</p>
                                    <p class="card-text">Fecha de devolución: {{c.fechaFin | date:'dd/MM/yyyy HH:mm'}}</p>
                                    <p class="card-text">Auto: {{c.auto.nombre}}</p>
                                    <p class="card-text"><small class="text-muted">{{c.auto.marca}}</small></p>                            
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        }
    </div>
</div>  
}
</div>
<div>
    <h1>Datos de la BD</h1>
    <button (click)="obtenerDatos()">Datos BD</button>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.0.0-beta3/js/bootstrap.min.js"></script>